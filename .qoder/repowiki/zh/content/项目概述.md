# 项目概述

<cite>
**本文档引用的文件**  
- [README.md](file://README.md)
- [package.json](file://package.json)
- [astro.config.mjs](file://astro.config.mjs)
- [sanity.config.ts](file://sanity/sanity.config.ts)
- [sanity.ts](file://src/lib/sanity.ts)
- [Layout.astro](file://src/layouts/Layout.astro)
- [blog/index.astro](file://src/pages/blog/index.astro)
- [projects/index.astro](file://src/pages/projects/index.astro)
- [about.astro](file://src/pages/about.astro)
- [ThemeToggle.vue](file://src/components/ThemeToggle.vue)
- [global.css](file://src/styles/global.css)
- [post.ts](file://sanity/schemaTypes/post.ts)
- [project.ts](file://sanity/schemaTypes/project.ts)
- [build-cms.bat](file://scripts/build-cms.bat)
</cite>

## 目录
1. [简介](#简介)
2. [项目结构](#项目结构)
3. [核心架构](#核心架构)
4. [内容管理系统](#内容管理系统)
5. [前端架构](#前端架构)
6. [数据流与查询](#数据流与查询)
7. [核心功能实现](#核心功能实现)
8. [构建与部署流程](#构建与部署流程)
9. [技术选型分析](#技术选型分析)
10. [结论](#结论)

## 简介

本项目是一个基于Astro框架的个人博客与作品集网站，采用前后端分离的架构设计，结合静态站点生成（SSG）与内容即服务（CaaS）的理念，实现了高性能、易维护的现代化Web应用。项目通过Sanity CMS实现内容管理，利用Astro进行高效静态渲染，为用户提供流畅的浏览体验。

该网站主要包含博客系统、作品集展示和个人介绍三大核心功能模块，支持响应式设计和深色模式切换，旨在为开发者提供一个展示技术能力和个人作品的专业平台。项目采用Astro + Vue + Tailwind CSS + Sanity的技术组合，充分发挥各技术栈的优势，实现开发效率与运行性能的平衡。

**Section sources**
- [README.md](file://README.md#L1-L185)

## 项目结构

项目采用清晰的模块化结构，主要分为前端源码、CMS配置和脚本工具三个部分。这种结构设计使得内容管理与前端展示完全分离，便于团队协作和独立维护。

```mermaid
graph TB
A[项目根目录] --> B[sanity/]
A --> C[src/]
A --> D[scripts/]
A --> E[public/]
B --> B1[schemaTypes/]
B --> B2[sanity.config.ts]
B --> B3[package.json]
C --> C1[components/]
C --> C2[layouts/]
C --> C3[lib/]
C --> C4[pages/]
C --> C5[styles/]
D --> D1[build-cms.bat]
D --> D2[fix-cms-paths.js]
E --> E1[cms/]
E --> E2[index.html]
```

**Diagram sources**
- [README.md](file://README.md#L15-L35)

**Section sources**
- [README.md](file://README.md#L15-L35)

## 核心架构

项目采用前后端分离的架构设计，前端使用Astro框架进行静态站点生成，后端使用Sanity CMS作为内容即服务（CaaS）平台。这种架构模式结合了静态站点的高性能优势和CMS系统的易用性特点。

```mermaid
graph LR
A[Sanity CMS] --> |GROQ查询| B[Astro构建时]
B --> C[静态HTML生成]
C --> D[静态资源部署]
D --> E[用户浏览器]
E --> F[客户端交互]
F --> G[Vue组件]
style A fill:#f9f,stroke:#333
style B fill:#bbf,stroke:#333
style C fill:#f96,stroke:#333
style D fill:#9f9,stroke:#333
style E fill:#99f,stroke:#333
style F fill:#ff9,stroke:#333
style G fill:#9ff,stroke:#333
```

**Diagram sources**
- [astro.config.mjs](file://astro.config.mjs#L1-L35)
- [sanity.config.ts](file://sanity/sanity.config.ts#L1-L31)

**Section sources**
- [astro.config.mjs](file://astro.config.mjs#L1-L35)
- [sanity.config.ts](file://sanity/sanity.config.ts#L1-L31)

## 内容管理系统

项目使用Sanity CMS作为内容管理后台，提供了直观的内容编辑界面和灵活的数据模型定义。Sanity Studio被构建并部署在`/cms`路径下，通过独立的构建流程集成到静态站点中。

```mermaid
classDiagram
class SanityConfig {
+projectId : string
+dataset : string
+basePath : '/cms'
+plugins : [structureTool, visionTool]
}
class SchemaTypes {
+post : Document
+project : Document
+author : Document
+category : Document
+about : Document
}
class GROQQuery {
+postsQuery : string
+categoriesQuery : string
+projectsQuery : string
+aboutQuery : string
}
SanityConfig --> SchemaTypes : "定义"
SanityConfig --> GROQQuery : "使用"
GROQQuery --> SchemaTypes : "查询"
```

**Diagram sources**
- [sanity.config.ts](file://sanity/sanity.config.ts#L1-L31)
- [schemaTypes/post.ts](file://sanity/schemaTypes/post.ts#L1-L84)
- [schemaTypes/project.ts](file://sanity/schemaTypes/project.ts#L1-L97)

**Section sources**
- [sanity.config.ts](file://sanity/sanity.config.ts#L1-L31)
- [schemaTypes/post.ts](file://sanity/schemaTypes/post.ts#L1-L84)
- [schemaTypes/project.ts](file://sanity/schemaTypes/project.ts#L1-L97)

## 前端架构

前端采用Astro框架作为核心，结合Vue组件和Tailwind CSS样式系统，实现了高效的静态渲染和丰富的交互体验。Astro的岛屿架构允许在静态页面中嵌入交互式Vue组件，兼顾性能与功能。

```mermaid
graph TD
A[Layout.astro] --> B[Header.astro]
A --> C[Footer.astro]
A --> D[页面内容]
E[blog/index.astro] --> F[PostCard.astro]
G[projects/index.astro] --> H[ProjectCard.astro]
I[about.astro] --> J[Card.astro]
K[ThemeToggle.vue] --> L[深色模式切换]
style A fill:#f9f,stroke:#333
style B fill:#bbf,stroke:#333
style C fill:#bbf,stroke:#333
style D fill:#f96,stroke:#333
style E fill:#9f9,stroke:#333
style F fill:#9f9,stroke:#333
style G fill:#9f9,stroke:#333
style H fill:#9f9,stroke:#333
style I fill:#9f9,stroke:#333
style J fill:#9f9,stroke:#333
style K fill:#ff9,stroke:#333
style L fill:#ff9,stroke:#333
```

**Diagram sources**
- [src/layouts/Layout.astro](file://src/layouts/Layout.astro#L1-L59)
- [src/components/ThemeToggle.vue](file://src/components/ThemeToggle.vue#L1-L79)

**Section sources**
- [src/layouts/Layout.astro](file://src/layouts/Layout.astro#L1-L59)
- [src/components/ThemeToggle.vue](file://src/components/ThemeToggle.vue#L1-L79)

## 数据流与查询

项目通过GROQ（Graph-Relational Object Queries）语言从Sanity CMS获取数据，在构建时预取内容并生成静态页面。这种数据获取策略确保了最终用户获得最快的加载速度。

```mermaid
sequenceDiagram
participant Build as 构建过程
participant Sanity as Sanity CMS
participant Page as 页面组件
participant Client as 客户端
Build->>Sanity : fetchSanity(postsQuery)
Sanity-->>Build : 返回博客文章数据
Build->>Sanity : fetchSanity(projectsQuery)
Sanity-->>Build : 返回项目数据
Build->>Page : 生成静态HTML
Page->>Client : 页面加载
Client->>Client : 初始化Vue组件
```

**Diagram sources**
- [src/lib/sanity.ts](file://src/lib/sanity.ts#L1-L99)
- [src/pages/blog/index.astro](file://src/pages/blog/index.astro#L1-L321)

**Section sources**
- [src/lib/sanity.ts](file://src/lib/sanity.ts#L1-L99)
- [src/pages/blog/index.astro](file://src/pages/blog/index.astro#L1-L321)

## 核心功能实现

项目实现了博客系统、作品集展示、响应式设计和深色模式支持等核心功能。每个功能模块都经过精心设计，确保用户体验的完整性和一致性。

```mermaid
flowchart TD
A[功能实现] --> B[博客系统]
A --> C[作品集展示]
A --> D[响应式设计]
A --> E[深色模式]
B --> B1[文章列表]
B --> B2[分类筛选]
B --> B3[文章详情]
C --> C1[项目网格]
C --> C2[技术筛选]
C --> C3[项目详情]
D --> D1[移动适配]
D --> D2[平板适配]
D --> D3[桌面适配]
E --> E1[系统偏好]
E --> E2[本地存储]
E --> E3[手动切换]
```

**Diagram sources**
- [src/pages/blog/index.astro](file://src/pages/blog/index.astro#L1-L321)
- [src/pages/projects/index.astro](file://src/pages/projects/index.astro#L1-L171)
- [src/components/ThemeToggle.vue](file://src/components/ThemeToggle.vue#L1-L79)

**Section sources**
- [src/pages/blog/index.astro](file://src/pages/blog/index.astro#L1-L321)
- [src/pages/projects/index.astro](file://src/pages/projects/index.astro#L1-L171)
- [src/components/ThemeToggle.vue](file://src/components/ThemeToggle.vue#L1-L79)

## 构建与部署流程

项目采用自动化构建流程，通过npm脚本协调前端和CMS的构建过程。完整的构建流程确保了前后端资源的正确集成和部署。

```mermaid
flowchart LR
A[构建流程] --> B[npm run build]
A --> C[npm run build-cms]
B --> D[生成dist/目录]
C --> E[执行build-cms.bat]
E --> F[构建Sanity Studio]
E --> G[修复资源路径]
E --> H[复制到public/cms]
E --> I[清理临时文件]
D --> J[部署dist/]
H --> J[部署public/cms]
J --> K[静态托管服务]
```

**Diagram sources**
- [package.json](file://package.json#L1-L28)
- [scripts/build-cms.bat](file://scripts/build-cms.bat#L1-L44)

**Section sources**
- [package.json](file://package.json#L1-L28)
- [scripts/build-cms.bat](file://scripts/build-cms.bat#L1-L44)

## 技术选型分析

项目选择Astro + Vue + Tailwind CSS + Sanity的技术组合，是基于对开发效率、性能表现和可维护性的综合考量。这种技术栈组合充分发挥了各工具的优势，形成了良好的开发体验。

```mermaid
erDiagram
ASTRO ||--o{ VUE : "集成"
ASTRO ||--o{ TAILWIND : "使用"
ASTRO ||--o{ SANITY : "获取数据"
VUE ||--o{ TAILWIND : "样式"
ASTRO {
string 框架类型 "静态站点生成器"
string 特性 "岛屿架构"
string 优势 "高性能"
}
VUE {
string 框架类型 "渐进式框架"
string 特性 "组件化"
string 优势 "交互性"
}
TAILWIND {
string 框架类型 "实用优先CSS"
string 特性 "原子类"
string 优势 "开发效率"
}
SANITY {
string 类型 "Headless CMS"
string 特性 "实时协作"
string 优势 "内容管理"
}
```

**Diagram sources**
- [package.json](file://package.json#L1-L28)
- [astro.config.mjs](file://astro.config.mjs#L1-L35)

**Section sources**
- [package.json](file://package.json#L1-L28)
- [astro.config.mjs](file://astro.config.mjs#L1-L35)

## 结论

本项目成功实现了一个现代化的个人博客与作品集网站，通过合理的架构设计和技术选型，平衡了开发效率、运行性能和用户体验。前后端分离的架构使得内容管理与前端展示可以独立演进，静态站点生成确保了最佳的加载性能，而Vue组件的引入则提供了必要的交互功能。

项目的技术组合Astro + Vue + Tailwind CSS + Sanity展现了现代Web开发的最佳实践，既保持了静态站点的简单性和性能优势，又通过组件化和CMS系统提供了足够的灵活性和可扩展性。这种架构特别适合内容驱动的网站，如博客、作品集、文档站点等，为开发者提供了一个可复用的模板和参考实现。

**Section sources**
- [README.md](file://README.md#L1-L185)
- [package.json](file://package.json#L1-L28)